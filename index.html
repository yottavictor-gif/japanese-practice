<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æ–‡å¥å­é‡çµ„ç·´ç¿’</title>
    <style>
        :root {
            --bg-color: #E0D3E8; /* åœ–ç‰‡èƒŒæ™¯è‰² */
            --text-color: #2c2c2c;
            --accent-color: #5D4E70;
            --correct-color: #4CAF50;
            --wrong-color: #f44336;
        }

        body {
            font-family: "Hiragino Kaku Gothic Pro", "Meiryo", "Noto Sans JP", sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--text-color);
        }

        .container {
            background-color: rgba(255, 255, 255, 0.6);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 90%;
            text-align: center;
        }

        h1 {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 2rem;
        }

        /* å¥å­å€åŸŸ */
        .sentence-area {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: baseline;
            gap: 10px;
            line-height: 2.5;
        }

        .fixed-text {
            white-space: nowrap;
        }

        /* å¡«ç©ºæ§½ */
        .slot-container {
            display: flex;
            gap: 8px;
            border-bottom: 2px solid #333;
            min-width: 200px;
            padding: 0 10px;
            justify-content: center;
        }

        .slot-word {
            background-color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            animation: popIn 0.3s ease;
        }

        .slot-word:hover {
            background-color: #ffe0e0;
        }

        /* é¸é …å€åŸŸ */
        .options-area {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 2rem;
            min-height: 80px; /* é ç•™é«˜åº¦é¿å…è·³å‹• */
        }

        .option-card {
            background-color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #ccc;
            transition: transform 0.1s, box-shadow 0.1s;
            position: relative;
        }

        .option-card:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #ccc;
        }

        .option-card.disabled {
            opacity: 0.3;
            pointer-events: none;
            box-shadow: none;
            transform: translateY(4px);
        }

        .option-number {
            font-size: 0.8rem;
            color: #888;
            margin-right: 5px;
            vertical-align: middle;
        }

        /* å‡åæ¨™æ³¨æ¨£å¼ */
        ruby {
            ruby-position: over;
        }
        rt {
            font-size: 0.5em;
            color: #555;
        }

        /* æŒ‰éˆ• */
        .btn {
            padding: 10px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn-check {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-check:hover { opacity: 0.9; transform: scale(1.05); }

        .btn-reset {
            background-color: #ccc;
            color: #333;
        }

        /* çµæœèˆ‡è§£èªª */
        .feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none; /* é è¨­éš±è— */
        }

        .feedback-area.correct {
            background-color: #e8f5e9;
            border: 2px solid var(--correct-color);
            display: block;
        }

        .feedback-area.wrong {
            background-color: #ffebee;
            border: 2px solid var(--wrong-color);
            display: block;
            animation: shake 0.5s;
        }

        .explanation {
            text-align: left;
            margin-top: 15px;
            font-size: 1rem;
            color: #444;
            line-height: 1.6;
        }

        .translation {
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 10px;
            display: block;
        }

        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* Mobile RWD */
        @media (max-width: 600px) {
            .sentence-area { font-size: 1.2rem; }
            .option-card { font-size: 1.1rem; padding: 8px 15px; }
            .slot-container { min-width: 100px; flex-wrap: wrap; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>è«‹é»æ“Šä¸‹æ–¹é¸é …ï¼Œå°‡å¥å­é‡çµ„ç‚ºæ­£ç¢ºé †åº</h1>

    <div class="sentence-area">
        <span class="fixed-text">ãŠã§ã‚“ã¯</span>
        
        <div class="slot-container" id="answer-slots">
            </div>

        <span class="fixed-text">
            <ruby>é‹æ–™ç†<rt>ãªã¹ã‚Šã‚‡ã†ã‚Š</rt></ruby>ã ã€‚
        </span>
    </div>

    <div class="options-area" id="options-pool">
        <div class="option-card" data-id="1" onclick="selectOption(1)">
            <span class="option-number">1</span>ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚‚
        </div>
        <div class="option-card" data-id="2" onclick="selectOption(2)">
            <span class="option-number">2</span><ruby>è²·<rt>ã‹</rt></ruby>ãˆã‚‹
        </div>
        <div class="option-card" data-id="3" onclick="selectOption(3)">
            <span class="option-number">3</span><ruby>äººæ°—<rt>ã«ã‚“ã</rt></ruby>ã®
        </div>
        <div class="option-card" data-id="4" onclick="selectOption(4)">
            <span class="option-number">4</span><ruby>æ‰‹è»½<rt>ã¦ãŒã‚‹</rt></ruby>ã«
        </div>
    </div>

    <div>
        <button class="btn btn-reset" onclick="resetGame()">é‡ç½®</button>
        <button class="btn btn-check" onclick="checkAnswer()">æª¢æŸ¥ç­”æ¡ˆ</button>
    </div>

    <div id="feedback" class="feedback-area">
        <h2 id="feedback-title"></h2>
        <div id="feedback-content" class="explanation"></div>
    </div>
</div>

<script>
    // å®šç¾©é¸é …å…§å®¹
    const optionsData = {
        1: '1 ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚‚',
        2: '2 <ruby>è²·<rt>ã‹</rt></ruby>ãˆã‚‹',
        3: '3 <ruby>äººæ°—<rt>ã«ã‚“ã</rt></ruby>ã®',
        4: '4 <ruby>æ‰‹è»½<rt>ã¦ãŒã‚‹</rt></ruby>ã«'
    };

    // æ­£ç¢ºç­”æ¡ˆé †åº (æ ¹æ“šèªæ³•åˆ†æ)
    // ãŠã§ã‚“ã¯ [ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚‚] [æ‰‹è»½ã«] [è²·ãˆã‚‹] [äººæ°—ã®] é‹æ–™ç†ã ã€‚
    const correctOrder = [1, 4, 2, 3];

    // ç›®å‰ä½¿ç”¨è€…é¸æ“‡çš„é †åº
    let currentSelection = [];

    // é¸å–é¸é …
    function selectOption(id) {
        // å¦‚æœå·²ç¶“é¸äº†4å€‹ï¼Œå°±ä¸èƒ½å†é¸
        if (currentSelection.length >= 4) return;
        
        // åŠ å…¥é¸æ“‡é™£åˆ—
        currentSelection.push(id);
        
        // æ›´æ–°ç•«é¢
        render();
    }

    // å–æ¶ˆé¸é … (é»æ“Šå¡«ç©ºå€çš„è©å½™æ™‚)
    function removeOption(index) {
        currentSelection.splice(index, 1);
        render();
        
        // éš±è—çµæœå€
        document.getElementById('feedback').className = 'feedback-area';
    }

    // æ¸²æŸ“ç•«é¢ (æ ¸å¿ƒé‚è¼¯)
    function render() {
        const slotsContainer = document.getElementById('answer-slots');
        const poolContainer = document.getElementById('options-pool');
        
        // 1. æ¸…ç©ºå¡«ç©ºå€
        slotsContainer.innerHTML = '';
        
        // 2. å¡«å…¥å·²é¸çš„è©
        currentSelection.forEach((id, index) => {
            const span = document.createElement('span');
            span.className = 'slot-word';
            span.innerHTML = optionsData[id].replace(/^\d\s/, ''); // å»æ‰æ•¸å­—é¡¯ç¤ºåœ¨å¥å­ä¸­æ¯”è¼ƒè‡ªç„¶
            span.onclick = () => removeOption(index);
            slotsContainer.appendChild(span);
        });

        // 3. æ›´æ–°ä¸‹æ–¹é¸é …çš„ç‹€æ…‹ (å¦‚æœè¢«é¸äº†ï¼Œå°±è®Šç°/ä¸å¯é»)
        const allOptions = document.querySelectorAll('.option-card');
        allOptions.forEach(card => {
            const id = parseInt(card.getAttribute('data-id'));
            if (currentSelection.includes(id)) {
                card.classList.add('disabled');
            } else {
                card.classList.remove('disabled');
            }
        });
    }

    // æª¢æŸ¥ç­”æ¡ˆ
    function checkAnswer() {
        const feedbackEl = document.getElementById('feedback');
        const titleEl = document.getElementById('feedback-title');
        const contentEl = document.getElementById('feedback-content');

        if (currentSelection.length !== 4) {
            alert('è«‹å°‡å››å€‹ç©ºæ ¼éƒ½å¡«æ»¿å–”ï¼');
            return;
        }

        // æ¯”å°é™£åˆ—æ˜¯å¦ç›¸ç­‰
        const isCorrect = JSON.stringify(currentSelection) === JSON.stringify(correctOrder);

        if (isCorrect) {
            feedbackEl.className = 'feedback-area correct';
            titleEl.textContent = 'ğŸ‰ æ­£ç¢ºï¼å¤ªæ£’äº†ï¼';
            titleEl.style.color = 'green';
            contentEl.innerHTML = `
                <span class="translation">ä¸­æ–‡ç¿»è­¯ï¼šé—œæ±ç…®æ˜¯ä¸€ç¨®åœ¨ä¾¿åˆ©å•†åº—ä¹Ÿèƒ½è¼•é¬†è²·åˆ°çš„ç†±é–€é‹ç‰©æ–™ç†ã€‚</span>
                <hr style="border:0; border-top:1px solid #ddd; margin:10px 0;">
                <strong>ğŸ’¡ èªæ³•è§£æï¼š</strong><br>
                é€™é¡Œçš„é—œéµåœ¨æ–¼ä¿®é£¾åè©ã€Œé‹æ–™ç†ï¼ˆãªã¹ã‚Šã‚‡ã†ã‚Šï¼‰ã€ã€‚<br><br>
                1. <strong>äººæ°—ã® (3)</strong>ï¼šç›´æ¥ä¿®é£¾ã€Œé‹æ–™ç†ã€ï¼Œè®Šæˆã€Œç†±é–€çš„é‹æ–™ç†ã€ã€‚<br>
                2. <strong>è²·ãˆã‚‹ (2)</strong>ï¼šå‹•è©å¯èƒ½å½¢ï¼Œä¿®é£¾å‰é¢çš„åè©ï¼Œè®Šæˆã€Œèƒ½è²·åˆ°çš„...ç†±é–€é‹æ–™ç†ã€ã€‚<br>
                3. <strong>æ‰‹è»½ã« (4)</strong>ï¼šå‰¯è©ã€Œè¼•é¬†åœ°/ç°¡å–®åœ°ã€ï¼Œä¿®é£¾å‹•è©ã€Œè²·ãˆã‚‹ã€ã€‚<br>
                4. <strong>ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚‚ (1)</strong>ï¼šè¡¨ç¤ºåœ°é»/æ¢ä»¶ï¼Œã€Œå³ä½¿åœ¨ä¾¿åˆ©å•†åº—ã€ã€‚<br><br>
                <strong>æ•´å¥çµæ§‹ï¼š</strong><br>
                ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚‚ (å³ä½¿åœ¨ä¾¿åˆ©å•†åº—) -> æ‰‹è»½ã« (è¼•é¬†åœ°) -> è²·ãˆã‚‹ (èƒ½è²·åˆ°çš„) -> äººæ°—ã® (ç†±é–€çš„) -> é‹æ–™ç† (é‹ç‰©)ã€‚
            `;
        } else {
            feedbackEl.className = 'feedback-area wrong';
            titleEl.textContent = 'âŒ å†è©¦ä¸€æ¬¡çœ‹çœ‹ï¼Ÿ';
            titleEl.style.color = '#d32f2f';
            contentEl.innerHTML = `
                æç¤ºï¼š<br>
                1. æœ€å¾Œçš„åè©æ˜¯ã€Œé‹æ–™ç†ã€ã€‚è«‹å•é€™å››å€‹é¸é …ä¸­ï¼Œå“ªä¸€å€‹æœ€é©åˆç›´æ¥æ”¾åœ¨ã€Œé‹æ–™ç†ã€å‰é¢ä¿®é£¾å®ƒï¼Ÿ(æ˜¯å½¢å®¹è©æ€§è³ªçš„è©)<br>
                2. ã€Œè²·ãˆã‚‹ã€(èƒ½è²·) æ˜¯å‹•è©ï¼Œå®ƒå‰é¢é€šå¸¸æ¥å‰¯è©ä¾†å½¢å®¹ã€Œæ€éº¼è²·ã€ã€‚
            `;
        }
    }

    // é‡ç½®éŠæˆ²
    function resetGame() {
        currentSelection = [];
        document.getElementById('feedback').className = 'feedback-area';
        render();
    }
</script>

</body>
</html>